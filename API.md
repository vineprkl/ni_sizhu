# 八字 & 六爻 API 文档

本文档详细说明了如何调用八字排盘和六爻排盘 API。

## 接口概述

### 1. 八字排盘

该 API 通过接收公历生日、时间和出生地等信息，返回一个包含详细八字排盘信息的 JSON 对象。

- **URL**: `http://localhost:8000/api/bazi`
- **HTTP 方法**: `GET`
- **响应格式**: `JSON` (UTF-8)

---

## 请求参数

所有参数均通过 URL 查询字符串 (Query String) 的形式传递。

| 参数名    | 类型   | 是否必需 | 默认值 | 描述                                       | 示例        |
| --------- | ------ | -------- | ------ | ------------------------------------------ | ----------- |
| `year`    | Number | 是       | -      | 出生的公历年份 (4位数字)                   | `2023`      |
| `month`   | Number | 是       | -      | 出生的公历月份 (1-12)                      | `12`        |
| `day`     | Number | 是       | -      | 出生的公历日期 (1-31)                      | `25`        |
| `hour`    | Number | 是       | -      | 出生的小时 (0-23)                          | `14`        |
| `province`| String | 是       | -      | 出生省份的中文名 (例如: "北京", "上海")    | `浙江`      |
| `city`    | String | 是       | -      | 出生城市的中文名 (例如: "北京", "上海")    | `杭州`      |
| `minute`  | Number | 否       | `0`    | 出生的分钟 (0-59)                          | `30`        |
| `gender`  | Number | 否       | `1`    | 性别 (1 代表男性, 0 代表女性)              | `1`         |

---

## 调用示例

这是一个完整的 API 调用 URL 示例：

```
http://localhost:8000/api/bazi?year=1990&month=5&day=12&hour=8&province=北京&city=北京&minute=15&gender=1
```

---

## 响应说明

### 成功响应

请求成功后，服务器会返回 `HTTP 200 OK` 状态码和一个 JSON 对象。

**响应体示例 (结构预览):**

```json
{
  "姓名": "某人",
  "出生地": "北京 北京",
  "公历": "1990年5月12日8时",
  "农历": "庚午年四月十八日辰时",
  "四柱": {
    "类型": "乾造",
    "年柱天干": "庚午",
    "月柱天干": "辛巳",
    "日柱天干": "丁酉",
    "时柱天干": "甲辰"
  },
  "藏干": [ "己丁", "丙庚戊", "辛", "戊乙癸" ],
  "地势": [ "临官", "帝旺", "长生", "冠带" ],
  "纳音": [ "路旁土", "白腊金", "山下火", "覆灯火" ],
  "节气": "立夏：1990年5月6日3时33分，芒种：1990年6月6日1时39分",
  "起大运": "周岁：9岁 4个月 21天，每一交大运年 10月 2日起运(公历)。",
  "胎元": "壬申",
  "命宫": "庚辰",
  "星座": "金牛座",
  "生肖": "马",
  "二十八宿": "轸",
  "命主福元": "离宫",
  "大运": [
    { "运": "大运", "干支": "庚辰", "地势": "冠带", "岁数": 10, "年份": 2000 },
    { "运": "大运", "干支": "己卯", "地势": "病", "岁数": 20, "年份": 2010 }
    // ... 更多大运信息
  ],
  "吉神凶煞": {
    "年柱": [ "太极", "学堂", "灾煞", "将星", "羊刃" ],
    "月柱": [ "太极", "文昌", "国印", "亡神", "元辰", "禄神" ],
    "日柱": [ "太极", "文昌", "天乙", "福星", "天德", "月德", "将星", "金舆" ],
    "时柱": [ "国印", "华盖" ]
  }
}
```

### 失败响应

如果请求参数不完整或发生内部错误，服务器会返回 `HTTP 400 Bad Request` 或其他错误状态码，并在响应体中包含一个错误信息。

**响应体示例:**

```json
{
  "error": "缺少必须的参数"
}
```

---
---

## 2. 六爻排盘

该 API 通过接收起卦时间等信息，返回一个包含详细六爻排盘信息的 JSON 对象。

- **URL**: `http://localhost:8000/api/liuyao`
- **HTTP 方法**: `GET`
- **响应格式**: `JSON` (UTF-8)

---

## 请求参数

所有参数均通过 URL 查询字符串 (Query String) 的形式传递。

| 参数名      | 类型   | 是否必需 | 默认值   | 描述                         | 示例        |
| ----------- | ------ | -------- | -------- | ---------------------------- | ----------- |
| `year`      | Number | 是       | -        | 起卦的公历年份 (4位数字)     | `2023`      |
| `month`     | Number | 是       | -        | 起卦的公历月份 (1-12)        | `12`        |
| `day`       | Number | 是       | -        | 起卦的公历日期 (1-31)        | `25`        |
| `hour`      | Number | 是       | -        | 起卦的小时 (0-23)            | `14`        |
| `minute`    | Number | 否       | `0`      | 起卦的分钟 (0-59)            | `30`        |
| `name`      | String | 否       | `某人`   | 求测人姓名                   | `张三`      |
| `birthYear` | Number | 否       | `1990`   | 求测人出生年份               | `1988`      |
| `gender`    | Number | 否       | `1`      | 性别 (1 代表男性, 0 代表女性)| `0`         |
| `debug`     | Boolean| 否       | `false`  | 设为 `true` 以开启调试模式，API将返回原始的文本行数组。 | `true`      |

---

## 调用示例

这是一个完整的 API 调用 URL 示例：

```
http://localhost:8000/api/liuyao?year=2024&month=8&day=7&hour=12
```

---

## 响应说明

### 成功响应

请求成功后，服务器会返回 `HTTP 200 OK` 状态码和一个 JSON 对象。

**响应体示例 (结构预览):**

```json
{
  "求测人": "某人",
  "性别": "男",
  "生年": "庚午(1990年)",
  "起卦方式": "自动起卦(起卦方式)",
  "公历": "2008年12月23日8时37分",
  "星期": "星期二",
  "农历": "戊子年 十一月 廿六日 辰时。",
  "神煞": "驿马-亥　桃花-午　干禄-午　贵人-亥、酉",
  "干支": "戊子年  甲子月  丁酉日  甲辰时",
  "卦身": "申",
  "主卦": "天火同人(离宫-归魂)",
  "变卦": "风火家人(巽宫)",
  "空亡": [ "辰", "巳" ],
  "yao": [
    {
      "六神": "青龙",
      "主卦爻": "▅▅▅▅▅",
      "主卦爻辞": "子孙壬戌土",
      "主卦位置": "应",
      "变卦爻": "▅▅▅▅▅",
      "变卦爻辞": "父母辛卯木"
    },
    // ... 其他5个爻的信息
  ]
}
```

### 失败响应

如果请求参数不完整或发生内部错误，服务器会返回 `HTTP 400 Bad Request` 或其他错误状态码，并在响应体中包含一个错误信息。

**响应体示例:**

```json
{
  "error": "缺少六爻起卦必须的参数 (year, month, day, hour)"
}
```